{% extends "base.html" %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<div class="flex justify-between items-center mb-6">
    <h1 class="text-2xl font-semibold">Quản lý Link</h1>

    <a href="{% url 'link_create' %}"
       class="bg-black text-white px-4 py-2 rounded hover:bg-gray-800">
        + Thêm link
    </a>
</div>

<div class="overflow-x-auto bg-white shadow rounded">
    <table class="w-full text-sm">
        <thead class="bg-gray-200 text-left">
            <tr>
                <th class="p-3">#</th>
                <th class="p-3">Tiêu đề</th>
                <th class="p-3">URL</th>
                <th class="p-3">Trạng thái</th>
                <th class="p-3">Click</th>
                <th class="p-3">Hành động</th>
            </tr>
        </thead>
        <tbody>
        {% for link in links %}
            <tr class="border-t">
                <td class="p-3">{{ forloop.counter }}</td>
                <td class="p-3 font-medium">{{ link.title }}</td>
                <td class="p-3">
                    <a href="{{ link.url }}" target="_blank"
                       class="text-blue-600 underline">
                        {{ link.url|truncatechars:30 }}
                    </a>
                </td>
                <td class="p-3">
                    {% if link.is_active %}
                        <span class="px-2 py-1 text-xs bg-green-100 text-green-700 rounded">
                            ON
                        </span>
                    {% else %}
                        <span class="px-2 py-1 text-xs bg-gray-200 text-gray-600 rounded">
                            OFF
                        </span>
                    {% endif %}
                </td>
                <td class="p-3">{{ link.click_count }}</td>
                <td class="p-3 space-x-2">
                    <a href="{% url 'link_edit' link.id %}"
                       class="text-yellow-600 hover:underline">
                        Sửa
                    </a>
                    <a href="{% url 'link_delete' link.id %}"
                       class="text-red-600 hover:underline">
                        Xóa
                    </a>
                </td>
            </tr>
        {% empty %}
            <tr>
                <td colspan="6" class="p-4 text-center text-gray-500">
                    Chưa có link nào
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>

<div class="mt-6 text-sm">
    <span class="font-medium">Link public:</span>
    <a href="/{{ user.username }}/" target="_blank"
       class="text-blue-600 underline">
        {{ request.get_host }}/{{ user.username }}/
    </a>
</div>
{% endblock %}
 